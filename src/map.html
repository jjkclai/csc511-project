<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./assets/css/style.css">
</head>
<body>
    <div id="map-svg-container" class="svg-container">
        <svg id="map-svg" class="svg"></svg>
    </div>

    <div id="map-options-container" class="options-container">
        <input type="checkbox" id="grid-checkbox-b" class="checkbox"><label>Show Blue-side Grid</label>
        <input type="checkbox" id="grid-checkbox-r" class="checkbox"><label>Show Red-side Grid</label>
    <div>

<script>
    var mapSvg = d3.select("svg#map-svg");

    mapSvg.append("image")
        .attr("xlink:href", "./assets/images/minimap.png")
        .attr("width", "100%")
        .attr("height", "100%");
    
    d3.select("input#grid-checkbox-b").on("change", function() {
        gridUpdate("b");
    });
    d3.select("input#grid-checkbox-r").on("change", function() {
        gridUpdate("r");
    });

    function gridUpdate(side) {
        if(d3.select("input#grid-checkbox-" + side).property("checked")){
            showGrid(side);
        } else {
            hideGrid(side);
        }
    }

    function showGrid(side) {
        var targetX2 = (side == "b") ? "0%" : "100%";
        var targetY2 = (side == "b") ? "100%" : "0%";

        mapSvg.append("line")
            .attr("class", "map-grid-" + side + " dashed-line")
            .attr("x1", "14%")
            .attr("y1", "14%")
            .attr("x2", targetX2)
            .attr("y2", targetY2)
            .attr("stroke-width", 5)
            .attr("stroke", "white");
    
        mapSvg.append("line")
            .attr("class", "map-grid-" + side + " dashed-line")
            .attr("x1", "32%")
            .attr("y1", "32%")
            .attr("x2", targetX2)
            .attr("y2", targetY2)
            .attr("stroke-width", 5)
            .attr("stroke", "white");
    
        mapSvg.append("line")
            .attr("class", "map-grid-" + side + " dashed-line")
            .attr("x1", "50%")
            .attr("y1", "50%")
            .attr("x2", targetX2)
            .attr("y2", targetY2)
            .attr("stroke-width", 5)
            .attr("stroke", "white");
    
        mapSvg.append("line")
            .attr("class", "map-grid-" + side + " dashed-line")
            .attr("x1", "68%")
            .attr("y1", "68%")
            .attr("x2", targetX2)
            .attr("y2", targetY2)
            .attr("stroke-width", 5)
            .attr("stroke", "white");
    
        mapSvg.append("line")
            .attr("class", "map-grid-" + side + " dashed-line")
            .attr("x1", "86%")
            .attr("y1", "86%")
            .attr("x2", targetX2)
            .attr("y2", targetY2)
            .attr("stroke-width", 5)
            .attr("stroke", "white");
    }
    
    function hideGrid(side) {
        d3.selectAll("line.map-grid-" + side).remove();
    }
</script>
</body>
</html>